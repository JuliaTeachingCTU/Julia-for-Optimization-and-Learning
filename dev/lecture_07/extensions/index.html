<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Extensions · Julia for Optimization and Learning</title><meta name="title" content="Extensions · Julia for Optimization and Learning"/><meta property="og:title" content="Extensions · Julia for Optimization and Learning"/><meta property="twitter:title" content="Extensions · Julia for Optimization and Learning"/><meta name="description" content="Documentation for Julia for Optimization and Learning."/><meta property="og:description" content="Documentation for Julia for Optimization and Learning."/><meta property="twitter:description" content="Documentation for Julia for Optimization and Learning."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.svg" alt="Julia for Optimization and Learning logo"/><img class="docs-dark-only" src="../../assets/logo-dark.svg" alt="Julia for Optimization and Learning logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Julia for Optimization and Learning</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../why/">Why Julia?</a></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Installation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../installation/installation/">Installation</a></li><li><a class="tocitem" href="../../installation/tutorial/">Quickstart guide</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">1: Basics I</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_01/variables/">Variables</a></li><li><a class="tocitem" href="../../lecture_01/operators/">Elementary functions</a></li><li><a class="tocitem" href="../../lecture_01/strings/">Strings</a></li><li><a class="tocitem" href="../../lecture_01/arrays/">Arrays</a></li><li><a class="tocitem" href="../../lecture_01/data_structures/">Data structures</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">2: Basics II</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_02/functions/">Function basics</a></li><li><a class="tocitem" href="../../lecture_02/conditions/">Conditional evaluations</a></li><li><a class="tocitem" href="../../lecture_02/loops/">Loops and iterators</a></li><li><a class="tocitem" href="../../lecture_02/scope/">Soft local scope</a></li><li><a class="tocitem" href="../../lecture_02/exercises/">Exercises</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">3: Packages</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_03/standardlibrary/">Standard library</a></li><li><a class="tocitem" href="../../lecture_03/pkg/">Package manager</a></li><li><a class="tocitem" href="../../lecture_03/Plots/">Plots.jl</a></li><li><a class="tocitem" href="../../lecture_03/DataFrames/">DataFrames.jl</a></li><li><a class="tocitem" href="../../lecture_03/otherpackages/">Other useful packages</a></li><li><a class="tocitem" href="../../lecture_03/interaction/">Interaction with other languages</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-7" type="checkbox"/><label class="tocitem" for="menuitem-7"><span class="docs-label">4: Functions and methods</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_04/functions/">Functions</a></li><li><a class="tocitem" href="../../lecture_04/methods/">Methods</a></li><li><a class="tocitem" href="../../lecture_04/scope/">Scope of variables</a></li><li><a class="tocitem" href="../../lecture_04/exceptions/">Exception handling</a></li><li><a class="tocitem" href="../../lecture_04/exercises/">Exercises</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8" type="checkbox"/><label class="tocitem" for="menuitem-8"><span class="docs-label">5: Type system and generic programming</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_05/compositetypes/">Abstract and composite types</a></li><li><a class="tocitem" href="../../lecture_05/currencies/">Generic programming</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9" type="checkbox"/><label class="tocitem" for="menuitem-9"><span class="docs-label">6: Code organization I</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_06/modules/">Files and modules</a></li><li><a class="tocitem" href="../../lecture_06/structure/">Package structure</a></li><li><a class="tocitem" href="../../lecture_06/workflow/">Development workflow</a></li><li><a class="tocitem" href="../../lecture_06/compatibility/">Package dependencies</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-10" type="checkbox" checked/><label class="tocitem" for="menuitem-10"><span class="docs-label">7: Code organization II</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../tests/">Tests</a></li><li><a class="tocitem" href="../documentation/">Documentation</a></li><li class="is-active"><a class="tocitem" href>Extensions</a><ul class="internal"><li><a class="tocitem" href="#Extension-for-Plots"><span>Extension for Plots</span></a></li><li><a class="tocitem" href="#Extension-for-Makie"><span>Extension for Makie</span></a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-11" type="checkbox"/><label class="tocitem" for="menuitem-11"><span class="docs-label">8: Optimization</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_08/theory/">Introduction to continuous optimization</a></li><li><a class="tocitem" href="../../lecture_08/gradients/">Gradients</a></li><li><a class="tocitem" href="../../lecture_08/unconstrained/">Unconstrained optimization</a></li><li><a class="tocitem" href="../../lecture_08/constrained/">Constrained optimization</a></li><li><a class="tocitem" href="../../lecture_08/exercises/">Exercises</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-12" type="checkbox"/><label class="tocitem" for="menuitem-12"><span class="docs-label">9: Regression and classification</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_09/theory/">Introduction to regression and classification</a></li><li><a class="tocitem" href="../../lecture_09/linear/">Linear regression</a></li><li><a class="tocitem" href="../../lecture_09/logistic/">Logistic regression</a></li><li><a class="tocitem" href="../../lecture_09/exercises/">Exercises</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-13" type="checkbox"/><label class="tocitem" for="menuitem-13"><span class="docs-label">10: Neural networks I.</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_10/theory/">Theory of neural networks</a></li><li><a class="tocitem" href="../../lecture_10/nn/">Neural networks</a></li><li><a class="tocitem" href="../../lecture_10/exercises/">Exercises</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-14" type="checkbox"/><label class="tocitem" for="menuitem-14"><span class="docs-label">11: Neural networks II.</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_11/theory/">Theory of neural networks</a></li><li><a class="tocitem" href="../../lecture_11/iris/">Introduction to Flux</a></li><li><a class="tocitem" href="../../lecture_11/nn/">More complex networks</a></li><li><a class="tocitem" href="../../lecture_11/exercises/">Exercises</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-15" type="checkbox"/><label class="tocitem" for="menuitem-15"><span class="docs-label">12: Statistics</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_12/sparse/">Linear regression with sparse constraints</a></li><li><a class="tocitem" href="../../lecture_12/monte/">Monte Carlo sampling</a></li><li><a class="tocitem" href="../../lecture_12/glm/">Linear regression revisited</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">7: Code organization II</a></li><li class="is-active"><a href>Extensions</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Extensions</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaTeachingCTU/Julia-for-Optimization-and-Learning" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaTeachingCTU/Julia-for-Optimization-and-Learning/blob/master/docs/src/lecture_07/extensions.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Extensions"><a class="docs-heading-anchor" href="#Extensions">Extensions</a><a id="Extensions-1"></a><a class="docs-heading-anchor-permalink" href="#Extensions" title="Permalink"></a></h1><h2 id="Extension-for-Plots"><a class="docs-heading-anchor" href="#Extension-for-Plots">Extension for Plots</a><a id="Extension-for-Plots-1"></a><a class="docs-heading-anchor-permalink" href="#Extension-for-Plots" title="Permalink"></a></h2><p>We used the same settings for the <code>plot</code> function in all previous examples. Therefore, it makes sense to write an auxiliary function setting attributes for the <code>plot</code> function. However, this function will depend on the <code>Plots</code> package, and if we add <code>Plots</code> to <code>ImageInspector</code>, it will significantly slow the loading time. </p><p>To define an extension, we need firstly modify the <code>Project.toml</code>. We have to add two new sections. The first new section <code>weakdeps</code> specifies all the dependencies we need for our extension. In our case, we only need <code>Plots</code>, so we add the following in the <code>Project.toml</code></p><pre><code class="language-toml hljs">[weakdeps]
Plots = &quot;91a5bcdd-55d7-5caf-9e0b-520d859cae80&quot;</code></pre><p>The second new section is <code>extensions</code> and in this section, we have to specify the extension name and the dependencies that the extension uses. In our case, the name is <code>PlotsExt</code> and we only need <code>Plots</code> (more dependencies can be specified as a list of their names)</p><pre><code class="language-toml hljs">[extensions]
PlotsExt = &quot;Plots&quot;</code></pre><p>We can also specify which versions of <code>Plots</code> package our extension supports. It can be done by adding a new record in the <code>compat</code> section</p><pre><code class="language-toml hljs">[compat]
Aqua = &quot;0.8&quot;
Colors = &quot;0.12, 0.13&quot;
Plots = &quot;1&quot;
Test = &quot;1.9&quot;
julia = &quot;1.9&quot;</code></pre><p>Now, we define an empty function <code>imageplot</code> inside of the ImageInstructor, i. e., we add the foollowing code to the <code>src/ImageInstructor.jl</code></p><pre><code class="language-julia hljs"># src/ImageInstructor.jl
function imageplot end</code></pre><p>This step is needed, since we will add methods to this function inside our extention. </p><p>The last step is to create the extension itself. The code for extension must be stored in <code>ext</code> folder in the root dir of the package. The code for the extension is them must be defined in the file with the same name, i. e., we have to create a new file <code>ext/PlotsExt.jl</code> and add the code into it</p><pre><code class="language-julia hljs"># ext/PlotsExt.jl
module PlotsExt

import Plots
using ImageInspector
using ImageInspector.Colors

function ImageInspector.imageplot(x, ind; flip=true, nrows=-1, ncols=-1, sep=1, kwargs...)
    img = imagegrid(x, ind; flip, nrows, ncols, sep)
    return imageplot(img; kwargs...)
end

function ImageInspector.imageplot(x; flip=true, kwargs...)
    img = image(x; flip)
    return imageplot(img; kwargs...)
end

function ImageInspector.imageplot(
    x::AbstractMatrix{&lt;:Color};
    legend=false,
    axis=nothing,
    border=:none,
    kwargs...
)
    return Plots.plot(x; legend, axis, border, kwargs...)
end

end</code></pre><p>Note, that we defined a new module, that has the same name as our extension. And that&#39;s all. Now we can test, whether the extension works. We have to start a new Julia session and activate <code>examples</code> enviroment. Now, if we do not load <code>Plots</code>, the <code>imageplot</code> function will have no methods, as can be seen below</p><pre><code class="language-julia hljs">julia&gt; using ImageInspector, MLDatasets

julia&gt; x = CIFAR10(split=:train).features;

julia&gt; imageplot(x, 1:10; nrows = 2, sep = 1)
ERROR: MethodError: no method matching imageplot(::Array{Float32, 4}, ::UnitRange{Int64}; nrows::Int64, sep::Int64)
[...]</code></pre><p>After loading the <code>Plots</code> package, the <code>imageplot</code> function will start working.</p><pre><code class="language-julia hljs">julia&gt; using Plots

julia&gt; imageplot(x, 1:10; nrows = 2, sep = 1)</code></pre><p><img src="../image_6.svg" alt/></p><h2 id="Extension-for-Makie"><a class="docs-heading-anchor" href="#Extension-for-Makie">Extension for Makie</a><a id="Extension-for-Makie-1"></a><a class="docs-heading-anchor-permalink" href="#Extension-for-Makie" title="Permalink"></a></h2><p>We can create multiple extensions for one package. For example, we can also create an extension for <code>Makie.jl</code>, which is an alternative package for generating plots. To do so, we have to follow the same steps as in the case of extension for <code>Plots</code>. </p><p>The first step is to modify the <code>Project.toml</code> file in the following way</p><pre><code class="language-toml hljs">[weakdeps]
CairoMakie = &quot;13f3f980-e62b-5c42-98c6-ff1f3baf88f0&quot;
Plots = &quot;91a5bcdd-55d7-5caf-9e0b-520d859cae80&quot;

[extensions]
MakieExt = &quot;CairoMakie&quot;
PlotsExt = &quot;Plots&quot;

[compat]
Aqua = &quot;0.8&quot;
CairoMakie = &quot;0.12&quot;
Colors = &quot;0.12, 0.13&quot;
Plots = &quot;1&quot;
Test = &quot;1.9&quot;
julia = &quot;1.9&quot;</code></pre><p>In other words, our extension for <code>Makie</code> has name <code>MakieExt</code> and depends on <code>CairoMakie</code>. Now we can create the extension itself by creating file <code>ext/MakieExt.jl</code> and adding the following code into it</p><pre><code class="language-julia hljs">module MakieExt

import CairoMakie
using ImageInspector
using ImageInspector.Colors

function ImageInspector.imageplot(x, ind; flip=true, nrows=-1, ncols=-1, sep=1, kwargs...)
    img = imagegrid(x, ind; flip, nrows, ncols, sep)
    return imageplot(img; kwargs...)
end

function ImageInspector.imageplot(x; flip=true, kwargs...)
    img = image(x; flip)
    return imageplot(img; kwargs...)
end

function ImageInspector.imageplot(x::AbstractMatrix{&lt;:Color}; kwargs...)

    f, ax = CairoMakie.image(reverse(x&#39;; dims=2); kwargs...)
    CairoMakie.hidedecorations!(ax)
    CairoMakie.hidespines!(ax)
    return f
end

end</code></pre><p>Now it&#39;s time to test the extension. To do so, we first have to install <code>CairoMakie</code> into <code>examples</code> enviroment</p><pre><code class="language-julia hljs">(ImageInspector) pkg&gt; activate ./examples

(examples) pkg&gt; add CairoMakie</code></pre><p>We have to start a new Julia session and activate <code>examples</code> enviroment. Now, if we do not load <code>CairoMakie</code>, the <code>imageplot</code> function will have no methods, as can be seen below</p><pre><code class="language-julia hljs">julia&gt; using ImageInspector, MLDatasets

julia&gt; x = CIFAR10(split=:train).features;

julia&gt; imageplot(x, 1:10; nrows = 2, sep = 1)
ERROR: MethodError: no method matching imageplot(::Array{Float32, 4}, ::UnitRange{Int64}; nrows::Int64, sep::Int64)
[...]</code></pre><p>After loading the <code>CairoMakie</code> package, the <code>imageplot</code> function will start working.</p><pre><code class="language-julia hljs">julia&gt; using CairoMakie

julia&gt; imageplot(x, 1:10; nrows = 2, sep = 1)</code></pre><p><img src="../image_8.svg" alt/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../documentation/">« Documentation</a><a class="docs-footer-nextpage" href="../../lecture_08/theory/">Introduction to continuous optimization »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.7.0 on <span class="colophon-date" title="Sunday 27 October 2024 14:11">Sunday 27 October 2024</span>. Using Julia version 1.10.5.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
