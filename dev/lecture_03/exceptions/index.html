<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Exception Handling · Numerical computing in Julia</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.svg" alt="Numerical computing in Julia logo"/><img class="docs-dark-only" src="../../assets/logo-dark.svg" alt="Numerical computing in Julia logo"/></a><div class="docs-package-name"><span class="docs-autofit">Numerical computing in Julia</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../why_julia/">Why Julia?</a></li><li><a class="tocitem" href="../../howto/">How to...</a></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">1: Variables and basic operators</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_01/variables/">Variables</a></li><li><a class="tocitem" href="../../lecture_01/operators/">Mathematical operations and Elementary functions</a></li><li><a class="tocitem" href="../../lecture_01/arrays/">Arrays</a></li><li><a class="tocitem" href="../../lecture_01/data_structures/">Data structures</a></li><li><a class="tocitem" href="../../lecture_01/strings/">Strings</a></li><li><a class="tocitem" href="../../lecture_01/exercises/">Exercises</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">2: Control flow</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_02/conditions/">Conditional evaluation</a></li><li><a class="tocitem" href="../../lecture_02/loops/">Loops and iterators</a></li><li><a class="tocitem" href="../../lecture_02/exercises/">Exercises</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox" checked/><label class="tocitem" for="menuitem-6"><span class="docs-label">3: Functions and methods</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../functions/">Functions</a></li><li><a class="tocitem" href="../methods/">Methods</a></li><li><a class="tocitem" href="../scope/">Scope of Variables</a></li><li class="is-active"><a class="tocitem" href>Exception Handling</a></li><li><a class="tocitem" href="../exercises/">Exercises</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-7" type="checkbox"/><label class="tocitem" for="menuitem-7"><span class="docs-label">4: Useful packages</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_04/packages/">Packages</a></li><li><a class="tocitem" href="../../lecture_04/DataFrames/">DataFrames.jl</a></li><li><a class="tocitem" href="../../lecture_04/Plots/">Plots.jl</a></li><li><a class="tocitem" href="../../lecture_04/otherpackages/">Other useful packages</a></li><li><a class="tocitem" href="../../lecture_04/exercises/">Exercises</a></li></ul></li><li><span class="tocitem">5: Composite types and constructors</span></li><li><span class="tocitem">6: Modules and enviroments</span></li><li><input class="collapse-toggle" id="menuitem-10" type="checkbox"/><label class="tocitem" for="menuitem-10"><span class="docs-label">7: Optimization</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_07/theory/">Theory of optimization</a></li><li><a class="tocitem" href="../../lecture_07/gradients/">Visualization of gradients</a></li><li><a class="tocitem" href="../../lecture_07/numerical_methods/">Numerical methods</a></li><li><a class="tocitem" href="../../lecture_07/exercises/">Exercises</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-11" type="checkbox"/><label class="tocitem" for="menuitem-11"><span class="docs-label">8: Regression and classification</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_08/theory/">Theory of regression and classification</a></li><li><a class="tocitem" href="../../lecture_08/linear/">Linear regression</a></li><li><a class="tocitem" href="../../lecture_08/logistic/">Logistic regression</a></li><li><a class="tocitem" href="../../lecture_08/exercises/">Exercises</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-12" type="checkbox"/><label class="tocitem" for="menuitem-12"><span class="docs-label">9: Neural networks I.</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_09/theory/">Theory of neural networks</a></li><li><a class="tocitem" href="../../lecture_09/nn/">Neural networks</a></li><li><a class="tocitem" href="../../lecture_09/exercises/">Exercises</a></li></ul></li><li><span class="tocitem">10: Neural networks II.</span></li><li><span class="tocitem">11: Ordinary differential equations</span></li><li><span class="tocitem">12: Statistics I.</span></li><li><span class="tocitem">13: Statistics II.</span></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">3: Functions and methods</a></li><li class="is-active"><a href>Exception Handling</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Exception Handling</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/VaclavMacha/JuliaCourse/blob/master/docs/src/lecture_03/exceptions.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Exception-Handling"><a class="docs-heading-anchor" href="#Exception-Handling">Exception Handling</a><a id="Exception-Handling-1"></a><a class="docs-heading-anchor-permalink" href="#Exception-Handling" title="Permalink"></a></h1><p>In many cases, unexpected behavior may occur during running code, which may lead to the situation, that some function is unable to return a reasonable value to its caller. In such cases, it may be best for the exceptional condition to either terminate the program while printing a diagnostic error message or if the programmer has provided code to handle such exceptional circumstances then allow that code to take the appropriate action.</p><p>In the following example, we define a factorial function in the same way as we did in the  <a href="lecture_03/@repl Short-circuit-evaluation">Short-circuit evaluation</a> section</p><pre><code class="language-julia">function fact(n)
    isinteger(n) &amp;&amp; n &gt;= 0 || error(&quot;argument must be non-negative integer&quot;)
    return n == 0 ? 1 : n * fact(n - 1)
end</code></pre><p>Note, tha we use the <code>error</code> function, which will throw a <code>ErrorException</code> if the input argument does not meet the given conditions. This function works quite well and returns a reasonable error message for incorrect input arguments</p><pre><code class="language-julia-repl">julia&gt; fact(1.4)
ERROR: argument must be non-negative integer

julia&gt; fact(-5)
ERROR: argument must be non-negative integer</code></pre><p>However, it is better to use error messages that are as descriptive as possible. In this case, the error message only tells us what conditions the argument should meet, but not the value of the argument. Fortunately, Julia provides several predefined types of exceptions that can be used to create more descriptive error messages. In our example, we want to check whether the argument is a non-negative integer. For such a case, we can use more specific <code>DomainError</code> as follows</p><pre><code class="language-julia">function fact(n)
    isinteger(n) &amp;&amp; n &gt;= 0 || throw(DomainError(n, &quot;argument must be non-negative integer&quot;))
    return n == 0 ? 1 : n * fact(n - 1)
end</code></pre><p>Note that we must use the <code>throw</code> function, because <code>DomainError(x, msg)</code> will only create an instance of type <code>DomainError</code>, but will not raise an error.</p><pre><code class="language-julia-repl">julia&gt; fact(1.4)
ERROR: DomainError with 1.4:
argument must be non-negative integer

julia&gt; fact(-5)
ERROR: DomainError with -5:
argument must be non-negative integer</code></pre><p>The error message now contains a short description as well as the value of the input argument and the type of expectation. Now imagine that due to an error, the <code>fact</code> function is used to calculate the factorial from a non-numeric value, such as a string</p><pre><code class="language-julia">julia&gt; fact(&quot;a&quot;)
ERROR: MethodError: no method matching isinteger(::String)
Closest candidates are:
  isinteger(::BigFloat) at mpfr.jl:859
  isinteger(::Missing) at missing.jl:100
  isinteger(::Integer) at number.jl:20
  ...
Stacktrace:
 [1] fact(::String) at ./REPL[1]:2
 [2] top-level scope at REPL[2]:1</code></pre><p>In this case, the <code>MethodError</code> is raised for the <code>isinteger</code> function and the error tells nothing about the <code>fact</code> function. We can track, that the error occurs when calling the <code>fact</code> function using the <code>Stacktrace</code> section located under the error message. The <code>Stacktrace</code> provides us an ordered list of function calls (from the last one) that preceded the error. In this case, we see that the last function call before the error is <code>fact(:: String)</code>, i.e. it tells us that the error occurs in the function <code>fact</code> with a string as the input argument. In this particular case, it makes sense to define factorial function only for real numbers. This can be done simply by entering the type of the input argument in the function declaration as follows</p><pre><code class="language-julia">function fact_new(n::Real)
    isinteger(n) &amp;&amp; n &gt;= 0 || throw(DomainError(n, &quot;argument must be non-negative integer&quot;))
    return n == 0 ? 1 : n * fact(n - 1)
end</code></pre><p>This function declaration will only work for arguments of a type that is a subtype of Real, otherwise <code>MethodError</code> will occur</p><pre><code class="language-julia-repl">julia&gt; fact_new(&quot;aaa&quot;)
ERROR: MethodError: no method matching fact_new(::String)
Closest candidates are:
  fact_new(!Matched::Real) at none:1</code></pre><p>Note, that <code>MethodError</code> provides two important information. The first is that the <code>fact_new</code> function is not defined for arguments of type <code>String</code>. The second one is the list of methods closest to the one we tried to call. In this case, the <code>fact_new</code> function has only one method, which works for any subtype of <code>Real</code>, as can be checked using <code>methods</code> function</p><pre><code class="language-julia-repl">julia&gt; methods(fact_new)
# 1 method for generic function &quot;fact_new&quot;:
[1] fact_new(n::Real) in Main.ex-expections at none:1</code></pre><p>A more precise description and a list of all predefined exception types can be found in the official <a href="https://docs.julialang.org/en/v1/manual/control-flow/#Exception-Handling">documentation</a>.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../scope/">« Scope of Variables</a><a class="docs-footer-nextpage" href="../exercises/">Exercises »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 1 January 2021 21:13">Friday 1 January 2021</span>. Using Julia version 1.5.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
