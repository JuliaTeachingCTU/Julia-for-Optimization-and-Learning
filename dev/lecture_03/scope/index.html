<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Scope of Variables · Julia for Machine Learning</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.svg" alt="Julia for Machine Learning logo"/><img class="docs-dark-only" src="../../assets/logo-dark.svg" alt="Julia for Machine Learning logo"/></a><div class="docs-package-name"><span class="docs-autofit">Julia for Machine Learning</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><input class="collapse-toggle" id="menuitem-2" type="checkbox"/><label class="tocitem" for="menuitem-2"><span class="docs-label">Installation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../installation/julia/">Julia</a></li><li><a class="tocitem" href="../../installation/vscode/">Visual Studio Code</a></li><li><a class="tocitem" href="../../installation/git/">Git</a></li><li><a class="tocitem" href="../../installation/tutorial/">Quick Start Guide</a></li></ul></li><li><a class="tocitem" href="../../why/">Why Julia?</a></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">1: Variables and basic operators</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_01/variables/">Variables</a></li><li><a class="tocitem" href="../../lecture_01/operators/">Elementary Functions</a></li><li><a class="tocitem" href="../../lecture_01/strings/">Strings</a></li><li><a class="tocitem" href="../../lecture_01/arrays/">Arrays</a></li><li><a class="tocitem" href="../../lecture_01/data_structures/">Data Structures</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">2: Control flow</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_02/conditions/">Conditional Evaluation</a></li><li><a class="tocitem" href="../../lecture_02/loops/">Loops and Iterators</a></li><li><a class="tocitem" href="../../lecture_02/scope/">Soft Local Scope</a></li><li><a class="tocitem" href="../../lecture_02/exercises/">Exercises</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox" checked/><label class="tocitem" for="menuitem-6"><span class="docs-label">3: Functions and methods</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../functions/">Functions</a></li><li><a class="tocitem" href="../methods/">Methods</a></li><li class="is-active"><a class="tocitem" href>Scope of Variables</a><ul class="internal"><li><a class="tocitem" href="#Local-scope"><span>Local scope</span></a></li><li><a class="tocitem" href="#Global-scope"><span>Global scope</span></a></li></ul></li><li><a class="tocitem" href="../exceptions/">Exception Handling</a></li><li><a class="tocitem" href="../exercises/">Exercises</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-7" type="checkbox"/><label class="tocitem" for="menuitem-7"><span class="docs-label">4: Packages</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_04/basics/">Package Management</a></li><li><a class="tocitem" href="../../lecture_04/standardlibrary/">Standard Library</a></li><li><a class="tocitem" href="../../lecture_04/Plots/">Plots.jl</a></li><li><a class="tocitem" href="../../lecture_04/DataFrames/">DataFrames.jl</a></li><li><a class="tocitem" href="../../lecture_04/otherpackages/">Other Useful Packages</a></li></ul></li><li><span class="tocitem">5: Composite types and constructors</span></li><li><span class="tocitem">6: Modules and enviroments</span></li><li><span class="tocitem">Final Project</span></li><li><input class="collapse-toggle" id="menuitem-11" type="checkbox"/><label class="tocitem" for="menuitem-11"><span class="docs-label">7: Optimization</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_07/theory/">Introduction to continuous optimization</a></li><li><a class="tocitem" href="../../lecture_07/unconstrained/">Unconstrained optimization</a></li><li><a class="tocitem" href="../../lecture_07/constrained/">Constrained optimization</a></li><li><a class="tocitem" href="../../lecture_07/exercises/">Exercises</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-12" type="checkbox"/><label class="tocitem" for="menuitem-12"><span class="docs-label">8: Regression and classification</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_08/theory/">Theory of regression and classification</a></li><li><a class="tocitem" href="../../lecture_08/linear/">Linear regression</a></li><li><a class="tocitem" href="../../lecture_08/logistic/">Logistic regression</a></li><li><a class="tocitem" href="../../lecture_08/exercises/">Exercises</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-13" type="checkbox"/><label class="tocitem" for="menuitem-13"><span class="docs-label">9: Neural networks I.</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_09/theory/">Theory of neural networks</a></li><li><a class="tocitem" href="../../lecture_09/nn/">Neural networks</a></li><li><a class="tocitem" href="../../lecture_09/exercises/">Exercises</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-14" type="checkbox"/><label class="tocitem" for="menuitem-14"><span class="docs-label">10: Neural networks II.</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_10/theory/">Theory of neural networks</a></li><li><a class="tocitem" href="../../lecture_10/nn/">More complex networks</a></li><li><a class="tocitem" href="../../lecture_10/exercises/">Exercises</a></li></ul></li><li><span class="tocitem">11: Statistics</span></li><li><input class="collapse-toggle" id="menuitem-16" type="checkbox"/><label class="tocitem" for="menuitem-16"><span class="docs-label">12: Ordinary differential equations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_12/theory/">Differential equations</a></li><li><a class="tocitem" href="../../lecture_12/ode/">Wave equation</a></li><li><a class="tocitem" href="../../lecture_12/diff_eq/">Julia package</a></li><li><a class="tocitem" href="../../lecture_12/optimal_control/">Optimal control</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">3: Functions and methods</a></li><li class="is-active"><a href>Scope of Variables</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Scope of Variables</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/VaclavMacha/JuliaCourse/blob/master/docs/src/lecture_03/scope.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Scope-of-Variables"><a class="docs-heading-anchor" href="#Scope-of-Variables">Scope of Variables</a><a id="Scope-of-Variables-1"></a><a class="docs-heading-anchor-permalink" href="#Scope-of-Variables" title="Permalink"></a></h1><p>The scope of a variable is the region of a code where a variable is visible. In Julia, there are two main types of scopes: <strong>global</strong> and <strong>local</strong>. A global scope can contain multiple local scope blocks, and moreover, local scope blocks can be nested. There is also a distinction in Julia between constructs which introduce a <em>hard scope</em> and those which only introduce a <em>soft scope</em>, which affects whether shadowing a global variable by the same name is allowed or not.</p><p>The following table shows constructs that introduce scope blocks</p><table><tr><th style="text-align: left">Construct</th><th style="text-align: left">Scope type</th><th style="text-align: center">Allowed within local</th></tr><tr><td style="text-align: left"><code>module</code>, <code>baremodule</code></td><td style="text-align: left">global</td><td style="text-align: center">✗</td></tr><tr><td style="text-align: left"><code>struct</code></td><td style="text-align: left">local (soft)</td><td style="text-align: center">✗</td></tr><tr><td style="text-align: left"><code>macro</code></td><td style="text-align: left">local (hard)</td><td style="text-align: center">✗</td></tr><tr><td style="text-align: left"><code>for</code>, <code>while</code>, <code>try</code></td><td style="text-align: left">local (soft)</td><td style="text-align: center">✔</td></tr><tr><td style="text-align: left"><code>let</code>, <code>functions</code>, <code>comprehensions</code>, <code>generators</code></td><td style="text-align: left">local (hard)</td><td style="text-align: center">✔</td></tr></table><p>In the table above, there are several constructs that we have not introduced yet. Some of these constructions will be discussed later in the course (modules and structures). The rest is described in the official <a href="https://docs.julialang.org/">documentation</a>.</p><h2 id="Local-scope"><a class="docs-heading-anchor" href="#Local-scope">Local scope</a><a id="Local-scope-1"></a><a class="docs-heading-anchor-permalink" href="#Local-scope" title="Permalink"></a></h2><p>A function declaration introduces a new (hard) local scope. It means that all variables defined inside a function body can be accessed and modified inside the function body. However, it is not possible to access these variables outside the function, i.e., all these variables are local</p><pre><code class="language-julia-repl">julia&gt; function f()
           z = 42
           return
       end
f (generic function with 1 method)

julia&gt; f()

julia&gt; z
ERROR: UndefVarError: z not defined</code></pre><p>Thanks to this property, we can use the names most suitable for our variables (x, y, z, etc.) without the risk of clashing with the declaration of other functions. It is possible to specify a global variable inside a function using the <code>global</code> keyword</p><pre><code class="language-julia-repl">julia&gt; function f()
           global z = 42
           return
       end
f (generic function with 1 method)

julia&gt; f()

julia&gt; z
42</code></pre><p>However, this is not recommended.  If we need a variable defined inside a function, we should probably return that variable as an output of the function</p><pre><code class="language-julia-repl">julia&gt; function f()
           z = 42
           return z
       end
f (generic function with 1 method)

julia&gt; z = f()
42

julia&gt; z
42</code></pre><p>In the example above, the <code>z</code> variable in the function is local, and the <code>z</code> variable outside of the function is global. These two variables are not the same.</p><h2 id="Global-scope"><a class="docs-heading-anchor" href="#Global-scope">Global scope</a><a id="Global-scope-1"></a><a class="docs-heading-anchor-permalink" href="#Global-scope" title="Permalink"></a></h2><p>Each module introduces a new global scope, separate from the global scope of all other modules. Note that the interactive prompt (aka REPL) is in the global scope of the module <code>Main</code></p><pre><code class="language-julia-repl">julia&gt; module A
           a = 1 # a global in A&#39;s scope
           b = 2 # b global in A&#39;s scope
       end
A

julia&gt; a # errors as Main&#39;s global scope is separate from A&#39;s
ERROR: UndefVarError: a not defined</code></pre><p>Modules can introduce variables of other modules into their scope through the <code>using</code> (or <code>import</code>)  keyword  statements or qualified access using the dot-notation</p><pre><code class="language-julia-repl">julia&gt; using .A: b # make variable b from module A available

julia&gt; A.a
1

julia&gt; b
2</code></pre><p>Note that while variable bindings can be read externally, they can only be changed within the module to which they belong</p><pre><code class="language-julia-repl">julia&gt; b = 4
ERROR: cannot assign a value to variable A.b from module Main</code></pre><p>Note that global scope variables can be accessed anywhere inside the global scope, even in the local scopes defined in that global scope. In the following example, we define a variable <code>c</code> in the Main&#39;s global scope, and then we define a function <code>foo</code> (that introduces a new local scope inside the Main&#39;s global scope), and inside this function, we use the variable <code>c</code></p><pre><code class="language-julia-repl">julia&gt; c = 10
10

julia&gt; foo(x) = x + c
foo (generic function with 1 method)

julia&gt; foo(1)
11</code></pre><p>However, it is not recommended to use global variables in this way. The reason is that global variables can change their type and value at any time, and therefore they cannot be properly optimized by the compiler. We can see the performance drop in a simple test</p><pre><code class="language-julia-repl">julia&gt; x = rand(10);

julia&gt; y = rand(10);

julia&gt; f_global() = x .+ y
f_global (generic function with 1 method)

julia&gt; f_local(x, y) = x .+ y
f_local (generic function with 1 method)

julia&gt; hcat(f_global(), f_local(x, y))
10×2 Array{Float64,2}:
 0.523048  0.523048
 1.69132   1.69132
 1.25398   1.25398
 0.673862  0.673862
 1.18218   1.18218
 0.952689  0.952689
 1.38203   1.38203
 0.609129  0.609129
 0.843349  0.843349
 1.05429   1.05429</code></pre><p>In the example above, we defined two functions that do the same thing. The first function has no arguments and returns a sum of two global variables, <code>x</code> and <code>y</code>. The second function also returns a sum of variables <code>x</code> and <code>y</code>. However, in this case, these variables are local since they are introduced as the inputs to the function. If we use the <code>@time</code> macro, we can measure the time needed to call these two functions</p><pre><code class="language-julia-repl">julia&gt; @time f_global();
  0.000015 seconds (3 allocations: 224 bytes)

julia&gt; @time f_local(x, y);
  0.000002 seconds (1 allocation: 160 bytes)</code></pre><p>We can see that the second function is faster and also needs fewer allocations. The reason is that when we call the <code>f_local</code> function for the first time, the function is optimized for the given arguments. Each time a function is called for the first time with new types of arguments, it is compiled. This can be seen in the following example, where the first call is slower due to the compilation</p><pre><code class="language-julia-repl">julia&gt; a, b = 1:10, 11:20;

julia&gt; @time f_local(a, b);
  0.023634 seconds (39.61 k allocations: 2.142 MiB)

julia&gt; @time f_local(a, b);
  0.000017 seconds (1 allocation: 32 bytes)</code></pre><p>On the other hand, the <code>f_global</code> function cannot be optimized because it contains two global variables, and these two variables can change at any time.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../methods/">« Methods</a><a class="docs-footer-nextpage" href="../exceptions/">Exception Handling »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 8 February 2021 18:45">Monday 8 February 2021</span>. Using Julia version 1.5.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
