<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Package dependencies · Julia for Optimization and Learning</title><meta name="title" content="Package dependencies · Julia for Optimization and Learning"/><meta property="og:title" content="Package dependencies · Julia for Optimization and Learning"/><meta property="twitter:title" content="Package dependencies · Julia for Optimization and Learning"/><meta name="description" content="Documentation for Julia for Optimization and Learning."/><meta property="og:description" content="Documentation for Julia for Optimization and Learning."/><meta property="twitter:description" content="Documentation for Julia for Optimization and Learning."/><script data-outdated-warner src="../../assets/warner.js"></script><link href="https://cdnjs.cloudflare.com/ajax/libs/lato-font/3.0.0/css/lato-font.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/juliamono/0.050/juliamono.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.16.8/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../search_index.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-mocha.css" data-theme-name="catppuccin-mocha"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-macchiato.css" data-theme-name="catppuccin-macchiato"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-frappe.css" data-theme-name="catppuccin-frappe"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/catppuccin-latte.css" data-theme-name="catppuccin-latte"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.svg" alt="Julia for Optimization and Learning logo"/><img class="docs-dark-only" src="../../assets/logo-dark.svg" alt="Julia for Optimization and Learning logo"/></a><div class="docs-package-name"><span class="docs-autofit"><a href="../../">Julia for Optimization and Learning</a></span></div><button class="docs-search-query input is-rounded is-small is-clickable my-2 mx-auto py-1 px-2" id="documenter-search-query">Search docs (Ctrl + /)</button><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../why/">Why Julia?</a></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Setup guide</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../installation/installation/">Install</a></li><li><a class="tocitem" href="../../installation/tutorial/">Project setup</a></li><li><a class="tocitem" href="../../installation/running/">Running Julia</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">1: Basics I</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_01/variables/">Variables</a></li><li><a class="tocitem" href="../../lecture_01/operators/">Elementary functions</a></li><li><a class="tocitem" href="../../lecture_01/strings/">Strings</a></li><li><a class="tocitem" href="../../lecture_01/arrays/">Arrays</a></li><li><a class="tocitem" href="../../lecture_01/data_structures/">Data structures</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">2: Basics II</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_02/functions/">Function basics</a></li><li><a class="tocitem" href="../../lecture_02/conditions/">Conditional evaluations</a></li><li><a class="tocitem" href="../../lecture_02/loops/">Loops and iterators</a></li><li><a class="tocitem" href="../../lecture_02/scope/">Soft local scope</a></li><li><a class="tocitem" href="../../lecture_02/exercises/">Exercises</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">3: Packages</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_03/standardlibrary/">Standard library</a></li><li><a class="tocitem" href="../../lecture_03/pkg/">Package manager</a></li><li><a class="tocitem" href="../../lecture_03/Plots/">Plots.jl</a></li><li><a class="tocitem" href="../../lecture_03/DataFrames/">DataFrames.jl</a></li><li><a class="tocitem" href="../../lecture_03/otherpackages/">Other useful packages</a></li><li><a class="tocitem" href="../../lecture_03/interaction/">Interaction with other languages</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-7" type="checkbox"/><label class="tocitem" for="menuitem-7"><span class="docs-label">4: Functions and methods</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_04/functions/">Functions</a></li><li><a class="tocitem" href="../../lecture_04/methods/">Methods</a></li><li><a class="tocitem" href="../../lecture_04/scope/">Scope of variables</a></li><li><a class="tocitem" href="../../lecture_04/exceptions/">Exception handling</a></li><li><a class="tocitem" href="../../lecture_04/exercises/">Exercises</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8" type="checkbox"/><label class="tocitem" for="menuitem-8"><span class="docs-label">5: Type system and generic programming</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_05/compositetypes/">Abstract and composite types</a></li><li><a class="tocitem" href="../../lecture_05/currencies/">Generic programming</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9" type="checkbox" checked/><label class="tocitem" for="menuitem-9"><span class="docs-label">6: Code organization I</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../modules/">Files and modules</a></li><li><a class="tocitem" href="../structure/">Package structure</a></li><li><a class="tocitem" href="../workflow/">Development workflow</a></li><li class="is-active"><a class="tocitem" href>Package dependencies</a><ul class="internal"><li><a class="tocitem" href="#Compatibility"><span>Compatibility</span></a></li><li><a class="tocitem" href="#Adding-content"><span>Adding content</span></a></li></ul></li></ul></li><li><input class="collapse-toggle" id="menuitem-10" type="checkbox"/><label class="tocitem" for="menuitem-10"><span class="docs-label">7: Code organization II</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_07/tests/">Tests</a></li><li><a class="tocitem" href="../../lecture_07/documentation/">Documentation</a></li><li><a class="tocitem" href="../../lecture_07/extensions/">Extensions</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-11" type="checkbox"/><label class="tocitem" for="menuitem-11"><span class="docs-label">8: Optimization</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_08/theory/">Introduction to continuous optimization</a></li><li><a class="tocitem" href="../../lecture_08/gradients/">Gradients</a></li><li><a class="tocitem" href="../../lecture_08/unconstrained/">Unconstrained optimization</a></li><li><a class="tocitem" href="../../lecture_08/constrained/">Constrained optimization</a></li><li><a class="tocitem" href="../../lecture_08/exercises/">Exercises</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-12" type="checkbox"/><label class="tocitem" for="menuitem-12"><span class="docs-label">9: Regression and classification</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_09/theory/">Introduction to regression and classification</a></li><li><a class="tocitem" href="../../lecture_09/linear/">Linear regression</a></li><li><a class="tocitem" href="../../lecture_09/logistic/">Logistic regression</a></li><li><a class="tocitem" href="../../lecture_09/exercises/">Exercises</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-13" type="checkbox"/><label class="tocitem" for="menuitem-13"><span class="docs-label">10: Neural networks I.</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_10/theory/">Theory of neural networks</a></li><li><a class="tocitem" href="../../lecture_10/nn/">Neural networks</a></li><li><a class="tocitem" href="../../lecture_10/exercises/">Exercises</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-14" type="checkbox"/><label class="tocitem" for="menuitem-14"><span class="docs-label">11: Neural networks II.</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_11/theory/">Theory of neural networks</a></li><li><a class="tocitem" href="../../lecture_11/iris/">Introduction to Flux</a></li><li><a class="tocitem" href="../../lecture_11/nn/">More complex networks</a></li><li><a class="tocitem" href="../../lecture_11/exercises/">Exercises</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-15" type="checkbox"/><label class="tocitem" for="menuitem-15"><span class="docs-label">12: Statistics</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_12/sparse/">Linear regression with sparse constraints</a></li><li><a class="tocitem" href="../../lecture_12/monte/">Monte Carlo sampling</a></li><li><a class="tocitem" href="../../lecture_12/glm/">Linear regression revisited</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><a class="docs-sidebar-button docs-navbar-link fa-solid fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">6: Code organization I</a></li><li class="is-active"><a href>Package dependencies</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Package dependencies</a></li></ul></nav><div class="docs-right"><a class="docs-navbar-link" href="https://github.com/JuliaTeachingCTU/Julia-for-Optimization-and-Learning" title="View the repository on GitHub"><span class="docs-icon fa-brands"></span><span class="docs-label is-hidden-touch">GitHub</span></a><a class="docs-navbar-link" href="https://github.com/JuliaTeachingCTU/Julia-for-Optimization-and-Learning/blob/master/docs/src/lecture_06/compatibility.md" title="Edit source on GitHub"><span class="docs-icon fa-solid"></span></a><a class="docs-settings-button docs-navbar-link fa-solid fa-gear" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-article-toggle-button fa-solid fa-chevron-up" id="documenter-article-toggle-button" href="javascript:;" title="Collapse all docstrings"></a></div></header><article class="content" id="documenter-page"><h1 id="Package-dependencies"><a class="docs-heading-anchor" href="#Package-dependencies">Package dependencies</a><a id="Package-dependencies-1"></a><a class="docs-heading-anchor-permalink" href="#Package-dependencies" title="Permalink"></a></h1><p>In this section, we focus on package dependencies. So far, we showed how to add a specific package into environment. However, we have never taken into account the compatibility of different versions of the same package. As stated in the official <a href="https://pkgdocs.julialang.org/v1/compatibility/">Julia package manager documentation</a>: Compatibility refers to the ability to restrict the versions of the dependencies that your project is compatible with. If the compatibility for a dependency is not given, the project is assumed to be compatible with all versions of that dependency.</p><h2 id="Compatibility"><a class="docs-heading-anchor" href="#Compatibility">Compatibility</a><a id="Compatibility-1"></a><a class="docs-heading-anchor-permalink" href="#Compatibility" title="Permalink"></a></h2><p>Compatibility for a dependency can be entered in the Project.toml file manually, or using the Pkg REPL. For example, we can set compatibility for Julia itself.</p><pre><code class="language-julia hljs">(ImageInspector) pkg&gt; compat julia 1.9</code></pre><p>It will add the following section into the Project.toml</p><pre><code class="language-toml hljs">[compat]
julia = &quot;1.9&quot;</code></pre><p>In the example above, we are using semantic versioning. In this case, we set, that the package is compatible with all the following versions of Julia <code>[1.9.0 - 2.0.0)</code>. The behavior of version specification is slightly different for versions with leading zeros. For example, if we specify compatibility to <code>0.2.1</code>, it means, that we support only versions <code>[0.2.1 - 0.3.0)</code>. See the official <a href="https://pkgdocs.julialang.org/v1/compatibility/">documentation</a> for more details.</p><div class="admonition is-warning" id="Exercise:-cf51155619c6407e"><header class="admonition-header">Exercise:<a class="admonition-anchor" href="#Exercise:-cf51155619c6407e" title="Permalink"></a></header><div class="admonition-body"><p>This exercise defines the <code>image</code> function that converts a matrix of real numbers to a matrix of Gray points. Real numbers can be converted to Gray points by the <code>Gray</code> constructor from the Colors package.</p><p>Each Julia package contains its environment for tracking package dependencies. Use proper commands in the Pkg REPL to add <code>Colors</code> as a dependency of the ImageInspector package. Do not forget to add which versions of <code>Colors</code>  package are supported. For the sake of the following exercises, allow versions <code>0.12.*</code> and <code>0.13.*</code></p></div></div><details class="admonition is-details" id="Solution:-34963fa91b30834f"><summary class="admonition-header">Solution:<a class="admonition-anchor" href="#Solution:-34963fa91b30834f" title="Permalink"></a></summary><div class="admonition-body"><p>Since we want to add the <code>image</code> function to the ImageInspector package, we have to install the Colors package. However, we do not want to add it to <code>examples</code> but to <code>ImageInspector</code>. Printing the working directory by <code>pwd()</code>, we realize that we are in the correct folder and activate the working environment by <code>activate .</code> The dot represents the current working directory.</p><pre><code class="language-julia hljs">julia&gt; pwd()
&quot;.../ImageInspector&quot;

(examples) pkg&gt; activate .
Activating environment at `/path/ImageInspector/Project.toml`</code></pre><p>Now we use <code>add Colors</code> to install the Colors package.</p><pre><code class="language-julia hljs">(ImageInspector) pkg&gt; add Colors</code></pre><p>Now we can check which version of Colors package was installed using the <code>status</code> command in the Pkg REPL</p><pre><code class="language-julia hljs">Project ImageInspector v0.1.0
Status `.../ImageInspector.jl/Project.toml`
⌃ [5ae59095] Colors v0.12.11
Info Packages marked with ⌃ have new versions available and may be upgradable.</code></pre><p>In this particular case, we have Colors package in version <code>0.12.11</code>. To add compatibility for a dependency, we can use <code>compat</code> command in the Pkg REPL. To allow versions <code>0.12.*</code> and <code>0.13.*</code>, we can use the following command</p><pre><code class="language-julia hljs">(ImageInspector) pkg&gt; compat Colors &quot;0.12, 0.13&quot;
    Compat entry set:
Colors = &quot;0.12, 0.13&quot;
    Resolve checking for compliance with the new compat rules...</code></pre><p>We can check the <code>compat</code> section in the Project.toml</p><pre><code class="language-toml hljs">[compat]
Colors = &quot;0.12, 0.13&quot;
julia = &quot;1.9&quot;</code></pre><p>With the Colors package installed, we have to add <code>using Colors</code> into the ImageInspector module. Then we can define the <code>image</code> function and <code>export</code> it.</p><pre><code class="language-julia hljs"># /src/ImageInspector.jl
module ImageInspector

using Colors

export image

image(x::AbstractMatrix{&lt;:Real}) = Gray.(x)

end</code></pre></div></details><p>In the previous exercise, we added the first function into our package. In the following exercise, we will test the function in our <code>example</code> environment.</p><div class="admonition is-warning" id="Exercise:-a5ba49a9aa02d696"><header class="admonition-header">Exercise:<a class="admonition-anchor" href="#Exercise:-a5ba49a9aa02d696" title="Permalink"></a></header><div class="admonition-body"><p>Use the following code to test the function.</p><pre><code class="language-julia hljs"># /examples/example.jl
using ImageInspector, MLDatasets, Plots

X = MLDatasets.FashionMNIST(Float64, :train)[:][1];
x = selectdim(X, ndims(X), 1)

plot(image(x); axis = nothing, border = :none)</code></pre><p><strong>Hint:</strong> Do not forget to add <code>MLDatasets</code> and <code>Plots</code> to the <code>examples</code> environment.</p></div></div><details class="admonition is-details" id="Solution:-b06134537e73f27f"><summary class="admonition-header">Solution:<a class="admonition-anchor" href="#Solution:-b06134537e73f27f" title="Permalink"></a></summary><div class="admonition-body"><p>First, we need to install all necessary packages. Since we want to add the packages to the <code>examples</code> environment, we have to change the environment again</p><pre><code class="language-julia hljs">(ImageInspector) pkg&gt; activate ./examples

(examples) pkg&gt;</code></pre><p>Now, we can install <code>MLDatasets</code> and <code>Plots</code></p><pre><code class="language-julia hljs">(examples) pkg&gt; add MLDatasets Plots</code></pre><p>Now, with all packages installed, we can test the <code>image</code> function</p><pre><code class="language-julia hljs"># /examples/example.jl
using ImageInspector, MLDatasets, Plots

X = MLDatasets.FashionMNIST(Float64, :train)[:][1];
x = selectdim(X, ndims(X), 1)

plot(image(x); axis = nothing, border = :none)</code></pre></div></details><p><img src="../image_1.svg" alt/></p><h2 id="Adding-content"><a class="docs-heading-anchor" href="#Adding-content">Adding content</a><a id="Adding-content-1"></a><a class="docs-heading-anchor-permalink" href="#Adding-content" title="Permalink"></a></h2><p>The previous exercise used the MLDatasets package that provides many well-known datasets used in machine learning. One of them is the <code>FashionMNIST</code> dataset of gray images of clothes. However, the resulting image is rotated 90 degrees. The reason is that images in the FashionMNIST dataset are stored in the <strong>width x height</strong> format, but the Plots package assumes the <strong>height x width</strong> format. We solve this issue by redefining the <code>image</code> function as follows</p><pre><code class="language-julia hljs">function image(x::AbstractMatrix{T}; flip = true) where {T &lt;: Real}
    xx = flip ? PermutedDimsArray(x, (2, 1)) : x
    return Gray.(xx)
end</code></pre><p>In the definition of <code>image</code>, we use <code>PermutedDimsArray</code> that creates a permuted view without making a copy. There is also the <code>permutedims</code> function that does the same but creates a copy. Now we plot both images.</p><pre><code class="language-julia hljs"># /examples/example.jl
plot(
    plot(image(x; flip = true); title = &quot;flip = true&quot;),
    plot(image(x; flip = false); title = &quot;flip = false&quot;);
    axis = nothing,
    border = :none,
)</code></pre><p><img src="../image_2.svg" alt/></p><p>The <code>image</code> function also used <code>AbstractMatrix</code> to specify that the input must be a matrix. In general, we can specify the types of multi-dimensional input arrays in multiple ways:</p><ul><li><code>AbstractArray</code> specifies that the input must be an array.</li><li><code>AbstractArray{T}</code> specifies that the input must be an array with elements of type <code>T</code>.</li><li><code>AbstractArray{T, N}</code> specifies that the input must be an array of dimension <code>N</code> with elements of type <code>T</code>.</li><li><code>AbstractMatrix</code> or <code>AbstractMatrix{T}</code> is equivalent to  <code>AbstractArray</code> with <code>N=2</code>.</li><li><code>AbstractVector</code> or <code>AbstractVector{T}</code> is equivalent to  <code>AbstractArray</code> with <code>N=1</code>.</li></ul><p>We will now extend the <code>image</code> function to three-dimensional inputs. The third dimension represents the colour channels.</p><div class="admonition is-warning" id="Exercise:-fe5531d55696b4bb"><header class="admonition-header">Exercise:<a class="admonition-anchor" href="#Exercise:-fe5531d55696b4bb" title="Permalink"></a></header><div class="admonition-body"><p>Write a method for the <code>image</code> function that converts a 3D array of real numbers to its image representation. Assume that the third dimension represents the colour channels. Three channels should be converted to an RGB point extracting the RGB channels and <code>RGB.(r, g, b)</code>. If the size of the third dimension is:</p><ul><li><code>1</code> the function should return a grayscale image,</li><li><code>3</code> the function should return a colour image,</li><li>otherwise, the function should throw an error.</li></ul><p>Use the following code to test the <code>image</code> function.</p><pre><code class="language-julia hljs"># /examples/example.jl
X1 = MLDatasets.FashionMNIST(Float64, :train)[:][1];
X2 = MLDatasets.CIFAR10(Float64, :train)[:][1];

x1 = selectdim(X1, ndims(X1), 1)
x2 = selectdim(X2, ndims(X2), 1)

plot(
    plot(image(x1)),
    plot(image(x2));
    axis = nothing,
    border = :none
)</code></pre><p><strong>Hint:</strong> use the <code>eachslice</code> function to split the array along the third dimension and the <code>dropdims</code> function to drop a dimension.</p></div></div><details class="admonition is-details" id="Solution:-9027d835e4cd2db6"><summary class="admonition-header">Solution:<a class="admonition-anchor" href="#Solution:-9027d835e4cd2db6" title="Permalink"></a></summary><div class="admonition-body"><p>The functionality depends on the size of the third dimension.</p><ul><li>If the size of the third dimension is 1, we use the <code>dropdims</code> to remove the third dimension. Then we call the <code>image</code> method from the previous exercise.</li><li>If the dimension size is 3, we use <code>PermutedDimsArray</code> if <code>flip</code> is true. We can extract the three channels manually, or we can use the <code>eachslice</code> function.</li><li>Otherwise, we throw an <code>ArgumentError</code>.</li></ul><p>Altogether, the new method can be defined as follows.</p><pre><code class="language-julia hljs"># /src/ImageInspector.jl
function image(x::AbstractArray{T,3}; flip = true) where {T &lt;: Real}
    s = size(x, 3)
    if s == 1
        return image(dropdims(x; dims = 3); flip)
    elseif s == 3
        xx = flip ? PermutedDimsArray(x, (2, 1, 3)) : x
        r, g, b = eachslice(xx; dims=3)
        return RGB.(r, g, b)
    else
        throw(ArgumentError(&quot;unsupported size of the third dimension $(s) ∉ [1,3].&quot;))
    end
end</code></pre></div></details><p><img src="../image_3.svg" alt/></p><p>Multiple images are usually stored in multi-dimensional arrays. For example, grayscale images are stored as 3D or 4D arrays, where the last dimension represents individual images. Similarly, colour images are stored as a 4D array.</p><div class="admonition is-warning" id="Exercise:-593b0bf463a36e4c"><header class="admonition-header">Exercise:<a class="admonition-anchor" href="#Exercise:-593b0bf463a36e4c" title="Permalink"></a></header><div class="admonition-body"><p>Add new methods to the <code>image</code> function with the following properties:</p><ul><li>New methods should accept two arguments:<ul><li><code>x</code>: 3D or 4D array of real numbers that represents images,</li><li><code>inds</code>: one or more image indices to extract and convert to Gray/RGB representation.</li></ul></li><li>If only one index is provided, the method should return a single image in its representation.</li><li>If multiple indices are provided, the method should return an array of images.</li></ul><p>Use the following code to test the <code>image</code> function.</p><pre><code class="language-julia hljs"># /examples/example.jl
X = MLDatasets.FashionMNIST(Float64, :train)[:][1];

plot(plot.(image(X, [1,2]))...; axis = nothing, border = :none)</code></pre></div></div><details class="admonition is-details" id="Solution:-d4aef90b31f5b235"><summary class="admonition-header">Solution:<a class="admonition-anchor" href="#Solution:-d4aef90b31f5b235" title="Permalink"></a></summary><div class="admonition-body"><p>We have four possible combinations of the input arguments:</p><ol><li>3D array and one index,</li><li>3D array and multiple indices,</li><li>4D array and one index,</li><li>4D array and multiple indices.</li></ol><p>We should, therefore, define a method for each combination of input arguments. We can do this in the following way:</p><pre><code class="language-julia hljs"># /src/ImageInspector.jl
image(x::AbstractArray{T,3}, inds; flip = true) where {T &lt;: Real} = [image(x[:,:,i]; flip) for i in inds]
image(x::AbstractArray{T,4}, inds; flip = true) where {T &lt;: Real} = [image(x[:,:,:,i]; flip) for i in inds]
image(x::AbstractArray{T,3}, ind::Int; flip = true) where {T &lt;: Real} = image(x, [ind]; flip)[1]
image(x::AbstractArray{T,4}, ind::Int; flip = true) where {T &lt;: Real} = image(x, [ind]; flip)[1]</code></pre><p>Since <code>x[:,:,i]</code> creates a new copy, it can be replaced by <code>selectdim(x, 3, i)</code>, which creates a view.</p></div></details><p><img src="../image_4.svg" alt/></p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../workflow/">« Development workflow</a><a class="docs-footer-nextpage" href="../../lecture_07/tests/">Tests »</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="auto">Automatic (OS)</option><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option><option value="catppuccin-latte">catppuccin-latte</option><option value="catppuccin-frappe">catppuccin-frappe</option><option value="catppuccin-macchiato">catppuccin-macchiato</option><option value="catppuccin-mocha">catppuccin-mocha</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> version 1.14.1 on <span class="colophon-date" title="Tuesday 30 September 2025 09:12">Tuesday 30 September 2025</span>. Using Julia version 1.11.7.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
