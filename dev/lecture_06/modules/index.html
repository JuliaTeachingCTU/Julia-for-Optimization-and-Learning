<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Files and modules Â· Julia for Machine Learning</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.0/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark" data-theme-primary-dark/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script><link href="../../assets/favicon.ico" rel="icon" type="image/x-icon"/></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img class="docs-light-only" src="../../assets/logo.svg" alt="Julia for Machine Learning logo"/><img class="docs-dark-only" src="../../assets/logo-dark.svg" alt="Julia for Machine Learning logo"/></a><div class="docs-package-name"><span class="docs-autofit">Julia for Machine Learning</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../why/">Why Julia?</a></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox"/><label class="tocitem" for="menuitem-3"><span class="docs-label">Installation</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../installation/julia/">Julia</a></li><li><a class="tocitem" href="../../installation/vscode/">Visual Studio Code</a></li><li><a class="tocitem" href="../../installation/git/">Git</a></li><li><a class="tocitem" href="../../installation/tutorial/">Quickstart guide</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">1: Variables and basic operators</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_01/variables/">Variables</a></li><li><a class="tocitem" href="../../lecture_01/operators/">Elementary functions</a></li><li><a class="tocitem" href="../../lecture_01/strings/">Strings</a></li><li><a class="tocitem" href="../../lecture_01/arrays/">Arrays</a></li><li><a class="tocitem" href="../../lecture_01/data_structures/">Data structures</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">2: Control flow</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_02/conditions/">Conditional evaluations</a></li><li><a class="tocitem" href="../../lecture_02/loops/">Loops and iterators</a></li><li><a class="tocitem" href="../../lecture_02/scope/">Soft local scope</a></li><li><a class="tocitem" href="../../lecture_02/exercises/">Exercises</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-6" type="checkbox"/><label class="tocitem" for="menuitem-6"><span class="docs-label">3: Functions and methods</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_03/functions/">Functions</a></li><li><a class="tocitem" href="../../lecture_03/methods/">Methods</a></li><li><a class="tocitem" href="../../lecture_03/scope/">Scope of variables</a></li><li><a class="tocitem" href="../../lecture_03/exceptions/">Exception handling</a></li><li><a class="tocitem" href="../../lecture_03/exercises/">Exercises</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-7" type="checkbox"/><label class="tocitem" for="menuitem-7"><span class="docs-label">4: Packages</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_04/standardlibrary/">Standard library</a></li><li><a class="tocitem" href="../../lecture_04/Plots/">Plots.jl</a></li><li><a class="tocitem" href="../../lecture_04/DataFrames/">DataFrames.jl</a></li><li><a class="tocitem" href="../../lecture_04/otherpackages/">Other useful packages</a></li><li><a class="tocitem" href="../../lecture_04/interaction/">Interaction with other languages</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-8" type="checkbox"/><label class="tocitem" for="menuitem-8"><span class="docs-label">5: Type system and generic programming</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_05/compositetypes/">Abstract and composite types</a></li><li><a class="tocitem" href="../../lecture_05/currencies/">Generic programming</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-9" type="checkbox" checked/><label class="tocitem" for="menuitem-9"><span class="docs-label">6: Code organization</span><i class="docs-chevron"></i></label><ul class="collapsed"><li class="is-active"><a class="tocitem" href>Files and modules</a><ul class="internal"><li><a class="tocitem" href="#Files"><span>Files</span></a></li><li><a class="tocitem" href="#Modules"><span>Modules</span></a></li></ul></li><li><a class="tocitem" href="../pkg/">Package manager</a></li><li><a class="tocitem" href="../develop/">Package development</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-10" type="checkbox"/><label class="tocitem" for="menuitem-10"><span class="docs-label">Course requirements</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../final_project/homeworks/">Homework</a></li><li><a class="tocitem" href="../../final_project/project/">Final project</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-11" type="checkbox"/><label class="tocitem" for="menuitem-11"><span class="docs-label">7: Optimization</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_07/theory/">Introduction to continuous optimization</a></li><li><a class="tocitem" href="../../lecture_07/unconstrained/">Unconstrained optimization</a></li><li><a class="tocitem" href="../../lecture_07/constrained/">Constrained optimization</a></li><li><a class="tocitem" href="../../lecture_07/exercises/">Exercises</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-12" type="checkbox"/><label class="tocitem" for="menuitem-12"><span class="docs-label">8: Regression and classification</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_08/theory/">Theory of regression and classification</a></li><li><a class="tocitem" href="../../lecture_08/linear/">Linear regression</a></li><li><a class="tocitem" href="../../lecture_08/logistic/">Logistic regression</a></li><li><a class="tocitem" href="../../lecture_08/exercises/">Exercises</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-13" type="checkbox"/><label class="tocitem" for="menuitem-13"><span class="docs-label">9: Neural networks I.</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_09/theory/">Theory of neural networks</a></li><li><a class="tocitem" href="../../lecture_09/nn/">Neural networks</a></li><li><a class="tocitem" href="../../lecture_09/exercises/">Exercises</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-14" type="checkbox"/><label class="tocitem" for="menuitem-14"><span class="docs-label">10: Neural networks II.</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_10/theory/">Theory of neural networks</a></li><li><a class="tocitem" href="../../lecture_10/nn/">More complex networks</a></li><li><a class="tocitem" href="../../lecture_10/exercises/">Exercises</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-15" type="checkbox"/><label class="tocitem" for="menuitem-15"><span class="docs-label">11: Statistics</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_11/theory/">Statistics</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-16" type="checkbox"/><label class="tocitem" for="menuitem-16"><span class="docs-label">12: Ordinary differential equations</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../lecture_12/theory/">Differential equations</a></li><li><a class="tocitem" href="../../lecture_12/ode/">Wave equation</a></li><li><a class="tocitem" href="../../lecture_12/diff_eq/">Julia package</a></li><li><a class="tocitem" href="../../lecture_12/optimal_control/">Optimal control</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">6: Code organization</a></li><li class="is-active"><a href>Files and modules</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Files and modules</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/VaclavMacha/JuliaCourse/blob/master/docs/src/lecture_06/modules.md" title="Edit on GitHub"><span class="docs-icon fab">ï</span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Files-and-modules"><a class="docs-heading-anchor" href="#Files-and-modules">Files and modules</a><a id="Files-and-modules-1"></a><a class="docs-heading-anchor-permalink" href="#Files-and-modules" title="Permalink"></a></h1><p>When writing a code, especially in large projects, it is essential to organize code in a meaningful way. There are three main ways how to do it. The first one is to split code into multiple files. The second one is to use modules to create global scopes. The last and most advanced is to extract parts of the code that can be generalized into separate packages. All these three approaches can be (and usually are) used together to get even more readable code. In this lecture, we describe how to use these three approaches in Julia.</p><h2 id="Files"><a class="docs-heading-anchor" href="#Files">Files</a><a id="Files-1"></a><a class="docs-heading-anchor-permalink" href="#Files" title="Permalink"></a></h2><p>The first and most basic approach is to split the code into multiple files. Such files have to be of an appropriate type, i.e., Julia files with <code>.jl</code> extension. The code inside the Julia files can be loaded into global scope using the <code>include</code> function.</p><pre><code class="language-julia">include(&quot;/absolute/path/to/the/file/filename.jl&quot;)
include(&quot;../relative/path/to/the/file/filename.jl&quot;)</code></pre><p>The  <code>include</code> function evaluates the input source file&#39;s contents in the global scope of the module where the <code>include</code> call occurs. If some file is included multiple times, the file is also evaluated multiple times.</p><p>Using separate files to organize code can be very useful. However, this approach also has many disadvantages. We have to pay attention to avoid clashing of the variable/function names from different files since all files are evaluated in the same global scope. This problem can be solved by using modules as described in the following section.</p><div class = "info-body">
<header class = "info-header">Main module</header><p><p>If we evaluate a code in the REPL, the code is actually evaluated in the <code>Main</code> module, which serves as the default global scope. We can check it using the <code>@__MODULE__</code> macro that returns the module in which the macro is evaluated.</p><pre><code class="language-julia">julia&gt; @__MODULE__
Main</code></pre><p>It means that if we evaluate code in the REPL it is actually evaluated in the Main module. It can be easily checked using the <code>parentmodule</code> function that determines the module containing the (first) definition of a generic function.</p><pre><code class="language-julia">julia&gt; foo() = 1
foo (generic function with 1 method)

julia&gt; parentmodule(foo)
Main</code></pre></p></div><h2 id="Modules"><a class="docs-heading-anchor" href="#Modules">Modules</a><a id="Modules-1"></a><a class="docs-heading-anchor-permalink" href="#Modules" title="Permalink"></a></h2><p>Modules allow users to specify what names of variables/functions/types can be visible outside of the module. As we briefly mentioned in the section <a href="../../lecture_03/scope/#Scope-of-variables">Scope of variables</a>, modules in Julia introduce a new global scope. In other words, modules in Julia are separate variable workspaces and provide the following key features:</p><ul><li>defining top-level definitions (aka global variables) without worrying about name conflicts when your code is used together with somebody else&#39;s,</li><li>control of the visibility of variables/functions/types outside of the module via exporting,</li><li>control visibility of variables/functions/types from other modules inside the module via importing.</li></ul><p>The basic syntax for defining modules is the following. Modules are created using the <code>module</code> keyword.</p><pre><code class="language-julia">module Points

using LinearAlgebra

export Point, distance

struct Point{T &lt;: Real}
    x::T
    y::T
end

coordinates(p::Point) = (p.x, p.y)
Base.show(io::IO, p::Point) = print(io, coordinates(p))
distance(p::Point, q::Point) = norm(coordinates(q) .- coordinates(p), 2)

end</code></pre><p>In the example above, we define module <code>Points</code>. Firstly we import the <code>LinearAlgebra</code> package using the <code>using</code> keyword, which is the most common way to import modules. Note that packages are imported in the same way as modules. The reason is that each package&#39;s core is a module, as we will be described later in this lecture.  If we use <code>using Points</code> only the exported names are brought to the global scope. In our example, we use the <code>export</code> keyword to export the <code>Point</code> type and the <code>distance</code> function.</p><pre><code class="language-julia-repl">julia&gt; using .Points

julia&gt; p = Point(4,2)
(4, 2)

julia&gt; q = Point(2,2)
(2, 2)

julia&gt; distance(p, q)
2.0</code></pre><p>It is also possible to use all other functions and types defined in the module that are not exported. However, in such a case, we have to specify in which module the functions/types are defined. For example, we can call the <code>coordinates</code> function, which is not exported using the following syntax.</p><pre><code class="language-julia-repl">julia&gt; Points.coordinates(p)
(4, 2)

julia&gt; Points.coordinates(q)
(2, 2)</code></pre><p>When writing a module, we have to decide which functions/types export. Generally, only functions/types that are supposed to be used by the end-user should be exported.</p><p>When we want to redefine or extend some function from a module imported by the <code>using</code> keyword, we have to use the same syntax as in the example above. It means if we want to redefine the <code>distance</code> function, we can do it in the following way.</p><pre><code class="language-julia">using .Points: coordinates

function Points.distance(p::Point, q::Point)
    d = norm(coordinates(q) .- coordinates(p), 2)
    return &quot;Distance is $d&quot;
end</code></pre><p>Note that even if the function is exported, we have to specify in which module the function is defined if we want to redefine it. We can see the same syntax in the definition of the <code>Points</code> module, where we extend the <code>show</code> function from the <code>Base</code> module. Also note, that we used <code>using .Points: coordinates</code> syntax to allow calling the <code>coordinates</code> function without specifying the module name.</p><pre><code class="language-julia-repl">julia&gt; p = Point(4,2)
(4, 2)

julia&gt; q = Point(2,2)
(2, 2)

julia&gt; distance(p, q)
ERROR: UndefVarError: norm not defined</code></pre><p>Besides the <code>using</code> keyword, Julia provides also the <code>import</code> keyword to importing modules and packages. The behaviour of the <code>import</code> keyword is slightly different. For more information see the <a href="https://docs.julialang.org/en/v1/manual/modules/#Summary-of-module-usage">official documentation</a>.</p><div class = "info-body">
<header class = "info-header">Relative and absolute module paths</header><p><p>In the previous section, we added dots before the module name when used after the <code>using</code> keyword. The reason is that if we try to import a module, the system consults an internal table of top-level modules to look for the given module name. If the module does not exist, the system attempts to <code>require(:ModuleName)</code>, which typically results in loading code from an installed package.</p><p>However, if we evaluate code in the REPL, the code is actually evaluated in the <code>Main</code> module. It means that the <code>Points</code> module is actually a submodule of the <code>Main</code> module, i.e., it is not a top-level module. It can be seen if we type <code>Points</code> in the REPL or if we use the <code>parentmodule</code> function that returns a <code>Module</code> in which the given module is defined.</p><pre><code class="language-julia">julia&gt; Points
Main.Points

julia&gt; parentmodule(Points)
Main</code></pre><p>There are two possible ways how to load non-top-level modules: we can use the absolute or relative path to them. In our case, we have the following two options.</p><pre><code class="language-julia">using Main.Points
using .Points</code></pre><p>Adding more leading periods moves up additional levels in the module hierarchy. For example, <code>using ..Points</code> would look for <code>Points</code> in <code>Main</code>&#39;s enclosing module rather than in <code>Main</code> itself. However, <code>Main</code> is its own parent, so that the result will be the same in this concrete example.</p></p></div><div class = "info-body">
<header class = "info-header">Modules and files</header><p><p>Files and file names are mostly unrelated to modules. Modules are associated only with module expressions. One can have multiple files per module.</p><pre><code class="language-julia">module MyModule

include(&quot;file1.jl&quot;)
include(&quot;file2.jl&quot;)

end</code></pre><p>It is also perfectly fine to have multiple modules per file.</p><pre><code class="language-julia">module MyModule1
...
end

module MyModule2
...
end</code></pre></p></div></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../lecture_05/currencies/">Â« Generic programming</a><a class="docs-footer-nextpage" href="../pkg/">Package manager Â»</a><div class="flexbox-break"></div><p class="footer-message">Powered by <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> and the <a href="https://julialang.org/">Julia Programming Language</a>.</p></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Wednesday 24 March 2021 11:46">Wednesday 24 March 2021</span>. Using Julia version 1.5.4.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
